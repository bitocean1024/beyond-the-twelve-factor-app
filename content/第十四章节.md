# CHAPTER 14
### 遥测

遥测的概念不在最初的12个因素之列。遥测的字典定义意味着使用特殊设备对某物进行特定测量，然后使用无线电将这些测量传输到其他地方。遥测点到源头的测量是需要通过远程，远距离，无实物连接的方式来完成的

虽然我建议使用比无线电更现代的东西，但是遥测的使用应该是任何云原生应用程序的一个重要部分

在你本地跑程序有一些云上面没有的便利性，你可以执行debug，也可以跑数百个任务去可视化你程序的内部行为

你没有这种直接访问云应用程序内部的能力。你的应用程序实例可能会在几乎没有任何警告的情况下从美国东海岸移动到西海岸。你的应用程序可能启动的时候只有一个实例，几分钟后，你可能会有几百个正在运行的应用程序副本。这些都是非常强大、有用的特性，但它们为实时应用程序监视和遥测提供了一种不熟悉的模式

![](assets/markdown-img-paste-20210218172455574.png)
> 像对待太空探测器一样对待你的应用程序
> 我喜欢把向云上部署应用想像成向太空中发射一个科学探测器

如果你的作品已经跑到了千里之外，你无法在物理上接触它，更没法用锤子捶打的方式去迫使它运动，这种情况下，你想要什么样的遥测呢？你需要什么数据和控制去让你的作平在空中自由漂移呢？

当需要监控你的应用的时候，这里通常会有多种不同类型的数据：

* 应用性能监控

* 特定领域的遥测

* 健康和系统日志


其中第一个是APM，它由事件流组成，云端以外的工具可以使用这些事件来监视应用程序的性能。你的责任是定义和量化你的应用程序的特定的性能指标。用于组成APM仪表盘的数据通常是通用的，可以来自多个业务线的多个应用程序

第二点，特定领域的遥测，也取决于你。这是指对你的业务有意义的事件和数据流，您可以将其用于自己的分析和报告。这种类型的事件流通常被输入到一个“大数据”系统中，用于存储、分析和预测

APM和特定业务遥测会有些许不同，可以这样想：APM可以提供给你每秒的HTTP请求数，然后特定业务遥测可能会告诉你在最近的20分钟你卖出去了多少iPads

最后，健康和系统日志可能是由你的云服务供应商提供的，它们由一系列的事件流组成。比如服务的启动，关闭，扩展，web请求追溯。以及周期性的健康检测的结果

云让很多事情变得简单，但是监控和遥测仍然很困难，可能比传统的企业应用程序监控更困难。当你盯着消防水管看着水流，流里面包含定期健康检查、请求审核、业务级别事件、跟踪数据和性能指标的数据时，这是一个难以置信的数据量

在规划监控策略时，你要考虑清楚到底需要聚合多少信息、信息传入的速率以及要存储多少信息。如果应用程序从1个实例动态扩展到100个实例，那么也会导致日志流量增加百倍

审计和监控云应用程序是那种常常被忽视但是却又很重要的事情，特别是当你构建的是真正产品级别的应用程序。如果你不会盲目地将卫星送入轨道而没有办法对其进行监控，你就不应该对你的云应用程序做同样的事情

正确的遥测你的应用程序是你的应用程序在云上面运行成功或者失败的关键

### 项目主页
* [beyond-twelve-factors-app 中文版](../README.md)
